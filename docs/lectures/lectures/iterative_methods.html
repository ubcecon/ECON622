<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.450">

  <meta name="author" content="Jesse Perla">
  <title>ECON 622 Lectures - ECON622: Computational Economics with Data Science Applications</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <style>
  .reveal .custom3070 > div.column:first-child {
    width: 30%;
  }
  .reveal .custom3070 div.column:not(:first-child) {
    width: 70%;
  }
  .reveal .custom4060 > div.column:first-child {
    width: 40%;
  }
  .reveal .custom4060 div.column:not(:first-child) {
    width: 60%;
  }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">ECON622: Computational Economics with Data Science Applications</h1>
  <p class="subtitle">Numerical Linear Algebra with Iterative Methods</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Jesse Perla 
</div>
<div class="quarto-title-author-email">
<a href="mailto:jesse.perla@ubc.ca">jesse.perla@ubc.ca</a>
</div>
        <p class="quarto-title-affiliation">
            University of British Columbia
          </p>
    </div>
</div>

</section><section id="TOC">
<nav role="doc-toc"> 
<h2 id="toc-title">Table of contents</h2>
<ul>
<li><a href="#/overview" id="/toc-overview">Overview</a></li>
<li><a href="#/conditioning" id="/toc-conditioning">Conditioning</a></li>
<li><a href="#/stationary-iterative-methods" id="/toc-stationary-iterative-methods">Stationary Iterative Methods</a></li>
<li><a href="#/krylov-methods" id="/toc-krylov-methods">Krylov Methods</a></li>
<li><a href="#/preconditioning" id="/toc-preconditioning">Preconditioning</a></li>
</ul>
</nav>
</section>
<section>
<section id="overview" class="title-slide slide level1 center">
<h1>Overview</h1>

</section>
<section id="motivation" class="slide level2">
<h2>Motivation</h2>
<ul>
<li>In preparation for the ML lectures we cover some core numerical linear algebra concepts</li>
<li>Many of these are directly useful
<ul>
<li>e.g.&nbsp;solving large LLS and systems of equations, such as you might find with a large scale two-way fixed effects model</li>
<li>Solving systems of equations is useful in itself</li>
</ul></li>
<li>Others will be helpful in setting up understanding for ML
<ul>
<li>Matrix-free and iterative methods</li>
<li>What governs complexity and convergence speed</li>
<li>Conditioning</li>
<li>Regularization</li>
</ul></li>
</ul>
</section>
<section id="summary-and-material" class="slide level2">
<h2>Summary and Material</h2>
<ul>
<li>See <a href="https://julia.quantecon.org/tools_and_techniques/iterative_methods_sparsity.html">QuantEcon Krylov Methods and Matrix Conditioning</a></li>
</ul>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource julia number-lines code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1"></a><span class="im">using</span> <span class="bu">LinearAlgebra</span>, <span class="bu">Statistics</span>, <span class="bu">BenchmarkTools</span>, <span class="bu">SparseArrays</span>, <span class="bu">Random</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="im">using</span> <span class="bu">LaTeXStrings</span>, <span class="bu">Plots</span>, <span class="bu">IterativeSolvers</span>, <span class="bu">Preconditioners</span>, <span class="bu">IncompleteLU</span>, <span class="bu">LinearMaps</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="im">using</span> <span class="bu">Arpack</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="bu">Random</span>.<span class="fu">seed!</span>(<span class="fl">42</span>);  <span class="co"># seed random numbers for reproducibility</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section>
<section id="conditioning" class="title-slide slide level1 center">
<h1>Conditioning</h1>

</section>
<section id="direct-methods-and-conditioning" class="slide level2">
<h2>Direct Methods and Conditioning</h2>
<ul>
<li>Some algorithms and some matrices are more numerically stable than others
<ul>
<li>By “numerically stable” we mean sensitive to accumulated roundoff errors</li>
</ul></li>
<li>A key issue is when matrices are close to singular, or almost have collinear columns. Many times this can’t be avoided, other times it can (e.g., choose orthogonal polynomials rather than monomials)</li>
<li>This will become even more of an issue with iterative methods, but is also the key to rapid convergence. Hint: <span class="math inline">\(A x = b\)</span> is easy if <span class="math inline">\(A = I\)</span>, even if it is dense.</li>
</ul>
</section>
<section id="condition-numbers-of-matrices" class="slide level2">
<h2>Condition Numbers of Matrices</h2>
<ul>
<li><p><span class="math inline">\(\det(A) \approx 0\)</span> may say it is “almost” singular, but it is not scale-invariant</p></li>
<li><p>The condition number <span class="math inline">\(\kappa\)</span>, given matrix norm <span class="math inline">\(||\cdot||\)</span> uses the matrix norm</p>
<p><span class="math display">\[
\text{cond}(A) \equiv \|A\| \|A^{-1}\|\geq 1
\]</span></p></li>
<li><p>Expensive to calculate, can show that given spectrum</p>
<p><span class="math display">\[
\text{cond}(A) = \left|\frac{\lambda_{max}}{\lambda_{min}}\right|
\]</span></p></li>
<li><p>Intuition: if <span class="math inline">\(\text{cond}(A) = K\)</span>, then <span class="math inline">\(b \to b + \nabla b\)</span> change in <span class="math inline">\(b\)</span> amplifies to a <span class="math inline">\(x \to x + K \nabla b\)</span> error when solving <span class="math inline">\(A x = b\)</span>.</p></li>
<li><p>See <a href="https://www.mathworks.com/help/matlab/ref/inv.html#bu6sfy8-1">Matlab Docs on inv</a> for why <code>inv</code> is a bad idea when <span class="math inline">\(\text{cond}(A)\)</span> is huge</p></li>
</ul>
</section>
<section id="condition-numbers-and-matrix-operations" class="slide level2">
<h2>Condition Numbers and Matrix Operations</h2>
<ul>
<li>The identity matrix is as good as it gets</li>
<li>Otherwise, the issue is when matrices are of fundamentally different scales</li>
</ul>
<div class="cell columns column-output-location" data-execution_count="3">
<div class="column">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource julia number-lines code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1"></a><span class="pp">@show</span> <span class="fu">cond</span>(<span class="fu">I</span>(<span class="fl">2</span>))</span>
<span id="cb2-2"><a href="#cb2-2"></a>epsilon <span class="op">=</span> <span class="fl">1E-6</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>A2 <span class="op">=</span> [<span class="fl">1.0</span> <span class="fl">0.0</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>     <span class="fl">1.0</span> epsilon]</span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="pp">@show</span> <span class="fu">cond</span>(A2);</span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="pp">@show</span> <span class="fu">cond</span>(A2<span class="op">'</span>);</span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="pp">@show</span> <span class="fu">cond</span>(<span class="fu">inv</span>(A2));</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column">
<div class="cell-output cell-output-stdout">
<pre><code>cond(I(2)) = 1.0
cond(A2) = 2.0000000000005004e6
cond(A2') = 2.0000000000004997e6
cond(inv(A2)) = 2.0000000002323308e6</code></pre>
</div>
</div>
</div>
</section>
<section id="conditioning-under-matrix-products" class="slide level2">
<h2>Conditioning Under Matrix Products</h2>
<ul>
<li>Matrix operations can often amplify the condition number, or may be invariant</li>
<li>Be especially careful with normal equations/etc.</li>
</ul>
<div class="cell columns column-output-location" data-execution_count="4">
<div class="column">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource julia number-lines code-with-copy"><code class="sourceCode julia"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">lauchli</span>(N, epsilon) <span class="op">=</span> [<span class="fu">ones</span>(N)<span class="ch">';</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>                       epsilon <span class="op">*</span> <span class="fu">I</span>(N)]<span class="ch">'</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>epsilon <span class="op">=</span> <span class="fl">1E-8</span></span>
<span id="cb4-4"><a href="#cb4-4"></a>L <span class="op">=</span> <span class="fu">lauchli</span>(<span class="fl">3</span>, epsilon) <span class="op">|&gt;</span> <span class="dt">Matrix</span></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="pp">@show</span> <span class="fu">cond</span>(L)</span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="pp">@show</span> <span class="fu">cond</span>(L<span class="op">'</span> <span class="op">*</span> L)</span>
<span id="cb4-7"><a href="#cb4-7"></a>L</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column">
<div class="cell-output cell-output-stdout">
<pre><code>cond(L) = 1.732050807568878e8
cond(L' * L) = 2.8104131146758097e32</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>3×4 Matrix{Float64}:
 1.0  1.0e-8  0.0     0.0
 1.0  0.0     1.0e-8  0.0
 1.0  0.0     0.0     1.0e-8</code></pre>
</div>
</div>
</div>

<aside><div>
<p>See <a href="https://julia.quantecon.org/tools_and_techniques/iterative_methods_sparsity.html#why-a-monomial-basis-is-a-bad-idea">here</a> for why a monomial basis is a bad idea</p>
</div></aside></section></section>
<section>
<section id="stationary-iterative-methods" class="title-slide slide level1 center">
<h1>Stationary Iterative Methods</h1>

</section>
<section id="direct-methods" class="slide level2">
<h2>Direct Methods</h2>
<ul>
<li>Direct methods work with a matrix, stored in memory, and typically involve factorizations
<ul>
<li>Can be dense or sparse</li>
<li>They can be fast, and solve problems to machine precision</li>
</ul></li>
<li>Typically are superior until problems get large or have particular structure</li>
<li>But always use the right factorizations and matrix structure! (e.g., posdef, sparse, etc)</li>
<li>The key limitations are the sizes of the matrices (or the sparsity)</li>
</ul>
</section>
<section id="iterative-methods" class="slide level2">
<h2>Iterative Methods</h2>
<ul>
<li>Iterative methods are in the spirit of gradient descent and optimization algorithms
<ul>
<li>They take an initial guess and update until convergence</li>
<li>They work on matrix-vector and vector-matrix products, and can be <strong>matrix-free</strong>, which is a huge advantage for huge problems</li>
<li>Rather than waiting until completion like direct methods, you can control stopping</li>
</ul></li>
<li>The key limitations on performance are geometric (e.g., conditioning), not dimensionality</li>
<li>Two rough types: stationary methods and Krylov methods</li>
</ul>
</section>
<section id="example-from-previous-lectures" class="slide level2">
<h2>Example from Previous Lectures</h2>
<ul>
<li>Variation on CTMC example: <span class="math inline">\(a &gt;0\)</span> gain, <span class="math inline">\(b &gt; 0\)</span> to lose</li>
<li>Solve the Bellman Equation for a CTMC</li>
</ul>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource julia number-lines code-with-copy"><code class="sourceCode julia"><span id="cb7-1"><a href="#cb7-1"></a>N <span class="op">=</span> <span class="fl">100</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>a <span class="op">=</span> <span class="fl">0.1</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>b <span class="op">=</span> <span class="fl">0.05</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>rho <span class="op">=</span> <span class="fl">0.05</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>Q <span class="op">=</span> <span class="fu">Tridiagonal</span>(<span class="fu">fill</span>(b, N<span class="op">-</span><span class="fl">1</span>),</span>
<span id="cb7-6"><a href="#cb7-6"></a>                [<span class="op">-</span>a; <span class="fu">fill</span>(<span class="fu">-</span>(a <span class="op">+</span> b), N<span class="op">-</span><span class="fl">2</span>); <span class="op">-</span>b],</span>
<span id="cb7-7"><a href="#cb7-7"></a>                <span class="fu">fill</span>(a, N<span class="op">-</span><span class="fl">1</span>))</span>
<span id="cb7-8"><a href="#cb7-8"></a></span>
<span id="cb7-9"><a href="#cb7-9"></a>r <span class="op">=</span> <span class="fu">range</span>(<span class="fl">0.0</span>, <span class="fl">10.0</span>, length <span class="op">=</span> N)</span>
<span id="cb7-10"><a href="#cb7-10"></a>A <span class="op">=</span> rho <span class="op">*</span> I <span class="op">-</span> Q</span>
<span id="cb7-11"><a href="#cb7-11"></a>v_direct <span class="op">=</span> A <span class="op">\</span> r</span>
<span id="cb7-12"><a href="#cb7-12"></a><span class="fu">mean</span>(v_direct)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>101.96306207828795</code></pre>
</div>
</div>
</section>
<section id="diagonal-dominance" class="slide level2">
<h2>Diagonal Dominance</h2>
<ul>
<li><p>Stationary Iterative Methods reorganize the problem so it is a contraction mapping and then iterate</p></li>
<li><p>For matrices that are <a href="https://en.wikipedia.org/wiki/Diagonally_dominant_matrix"><strong>strictly diagonal dominant</strong></a> <span class="math display">\[
|A_{ii}| \geq \sum_{j\neq i} |A_{ij}| \quad\text{for all } i = 1\ldots N
\]</span></p>
<ul>
<li>i.e., sum of all off-diagonal elements in a row is less than the diagonal element in absolute value</li>
</ul></li>
<li><p>Note for our problem rows sum to 0 so if <span class="math inline">\(\rho &gt; 0\)</span> then <span class="math inline">\(\rho I - Q\)</span> is strictly diagonally dominant</p></li>
</ul>
</section>
<section id="jacobi-iteration" class="slide level2">
<h2>Jacobi Iteration</h2>
<ul>
<li>To solve a system <span class="math inline">\(A x = b\)</span>, split the matrix <span class="math inline">\(A\)</span> into its diagonal and off-diagonal elements. That is,</li>
</ul>
<p><span class="math display">\[
A \equiv D + R
\]</span></p>
<p><span class="math display">\[
D \equiv \begin{bmatrix} A_{11} &amp; 0 &amp; \ldots &amp; 0\\
                    0    &amp; A_{22} &amp; \ldots &amp; 0\\
                    \vdots &amp; \vdots &amp; \vdots &amp; \vdots\\
                    0 &amp; 0 &amp;  \ldots &amp; A_{NN}
    \end{bmatrix}\,\,
R \equiv \begin{bmatrix} 0 &amp; A_{12}  &amp; \ldots &amp; A_{1N} \\
                    A_{21}    &amp; 0 &amp; \ldots &amp; A_{2N} \\
                    \vdots &amp; \vdots &amp; \vdots &amp; \vdots\\
                    A_{N1}  &amp; A_{N2}  &amp;  \ldots &amp; 0
    \end{bmatrix}
\]</span></p>
</section>
<section id="jacobi-iteration-algorithm" class="slide level2">
<h2>Jacobi Iteration Algorithm</h2>
<ul>
<li>Then we can rewrite <span class="math inline">\((D + R) x = b\)</span> as <span class="math display">\[
\begin{aligned}
D x &amp;= b - R x\\
x &amp;= D^{-1} (b - R x)
\end{aligned}
\]</span></li>
</ul>
<p>Where <span class="math inline">\(D^{-1}\)</span> is trivial since diagonal. To solve, take an iteration <span class="math inline">\(x^k\)</span>, starting from <span class="math inline">\(x^0\)</span>,</p>
<p><span class="math display">\[
x^{k+1} = D^{-1}(b - R x^k)
\]</span></p>
</section>
<section id="code-for-jacobi-iteration" class="slide level2">
<h2>Code for Jacobi Iteration</h2>
<ul>
<li>Showing Jacobi Iteration and a better method, successive over-relaxation (SOR). Many better algoriths exist</li>
</ul>
<div class="cell columns column-output-location" data-execution_count="6">
<div class="column">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource julia number-lines code-with-copy"><code class="sourceCode julia"><span id="cb9-1"><a href="#cb9-1"></a>v <span class="op">=</span> <span class="fu">zeros</span>(N)</span>
<span id="cb9-2"><a href="#cb9-2"></a></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="fu">jacobi!</span>(v, A, r, maxiter <span class="op">=</span> <span class="fl">40</span>)</span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="pp">@show</span> <span class="fu">norm</span>(v <span class="op">-</span> v_direct, <span class="cn">Inf</span>)</span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="fu">sor!</span>(v, A, r, <span class="fl">1.1</span>, maxiter <span class="op">=</span> <span class="fl">40</span>)</span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="pp">@show</span> <span class="fu">norm</span>(v <span class="op">-</span> v_direct, <span class="cn">Inf</span>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column">
<div class="cell-output cell-output-stdout">
<pre><code>norm(v - v_direct, Inf) = 0.0017762754968373429
norm(v - v_direct, Inf) = 9.052314453583676e-12</code></pre>
</div>
</div>
</div>
</section></section>
<section>
<section id="krylov-methods" class="title-slide slide level1 center">
<h1>Krylov Methods</h1>

</section>
<section id="krylov-subspaces" class="slide level2">
<h2>Krylov Subspaces</h2>
<ul>
<li>Krylov methods are a class of iterative methods that use a sequence of subspaces</li>
<li>The subspaces are generated by repeated matrix-vector products
<ul>
<li>i.e., given an <span class="math inline">\(A\)</span> and a initial value <span class="math inline">\(b\)</span> we could generate the sequence</li>
<li><span class="math inline">\(b, A b, A^2 b, \ldots, A^k b\)</span> and see</li>
</ul></li>
<li>Note that the only operation we require from our linear operator <span class="math inline">\(A\)</span> is the matrix-vector product. This is a huge advantage for large problems</li>
<li>e.g.&nbsp;Krylov method is <a href="https://en.wikipedia.org/wiki/Conjugate_gradient_method">Conjugate Gradient</a> for posdef <span class="math inline">\(A\)</span></li>
</ul>
</section>
<section id="conjugate-gradient" class="slide level2">
<h2>Conjugate Gradient</h2>
<ul>
<li>Solving this system with the conjugate gradient method</li>
<li>Using matrix, but could just implement <span class="math inline">\(A\)</span> as a function</li>
</ul>
<div class="cell columns column-output-location" data-execution_count="7">
<div class="column">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource julia number-lines code-with-copy"><code class="sourceCode julia"><span id="cb11-1"><a href="#cb11-1"></a>N <span class="op">=</span> <span class="fl">100</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>A <span class="op">=</span> <span class="fu">sprand</span>(<span class="fl">100</span>, <span class="fl">100</span>, <span class="fl">0.1</span>)</span>
<span id="cb11-3"><a href="#cb11-3"></a>A <span class="op">=</span> A <span class="op">*</span> A<span class="op">'</span>  <span class="co"># easy posdef</span></span>
<span id="cb11-4"><a href="#cb11-4"></a>b <span class="op">=</span> <span class="fu">rand</span>(N)</span>
<span id="cb11-5"><a href="#cb11-5"></a>x_direct <span class="op">=</span> A <span class="op">\</span> b</span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="pp">@show</span> <span class="fu">cond</span>(<span class="fu">Matrix</span>(A <span class="op">*</span> A<span class="op">'</span>))</span>
<span id="cb11-7"><a href="#cb11-7"></a>x <span class="op">=</span> <span class="fu">zeros</span>(N)</span>
<span id="cb11-8"><a href="#cb11-8"></a>sol <span class="op">=</span> <span class="fu">cg!</span>(x, A, b, log <span class="op">=</span> <span class="cn">true</span>, maxiter <span class="op">=</span> <span class="fl">1000</span>)</span>
<span id="cb11-9"><a href="#cb11-9"></a>sol[<span class="kw">end</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column">
<div class="cell-output cell-output-stdout">
<pre><code>cond(Matrix(A * A')) = 1.0375698828984257e12</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>Converged after 183 iterations.</code></pre>
</div>
</div>
</div>
</section>
<section id="iterative-methods-for-lls" class="slide level2">
<h2>Iterative Methods for LLS</h2>
<ul>
<li><a href="https://stanford.edu/group/SOL/software/lsmr/LSMR-SISC-2011.pdf">LSMR</a> is one of several Krylov methods for solving LLS</li>
</ul>
<p><span class="math display">\[
\min_{\beta} \| X \beta -y \|^2 + \alpha  \| \beta\|^2
\]</span></p>
<ul>
<li>Where <span class="math inline">\(\alpha \geq 0\)</span>. If <span class="math inline">\(\alpha = 0\)</span> then it is delivers the ridgeless regression limit, even if underdetermined</li>
</ul>
</section>
<section id="lsmr-example" class="slide level2">
<h2>LSMR Example</h2>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource julia number-lines code-with-copy"><code class="sourceCode julia"><span id="cb14-1"><a href="#cb14-1"></a>M <span class="op">=</span> <span class="fl">1000</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>N <span class="op">=</span> <span class="fl">10000</span></span>
<span id="cb14-3"><a href="#cb14-3"></a>sigma <span class="op">=</span> <span class="fl">0.1</span></span>
<span id="cb14-4"><a href="#cb14-4"></a>beta <span class="op">=</span> <span class="fu">rand</span>(M)</span>
<span id="cb14-5"><a href="#cb14-5"></a><span class="co"># simulate data</span></span>
<span id="cb14-6"><a href="#cb14-6"></a>X <span class="op">=</span> <span class="fu">sprand</span>(N, M, <span class="fl">0.1</span>)</span>
<span id="cb14-7"><a href="#cb14-7"></a>y <span class="op">=</span> X <span class="op">*</span> beta <span class="op">+</span> sigma <span class="op">*</span> <span class="fu">randn</span>(N)</span>
<span id="cb14-8"><a href="#cb14-8"></a>beta_direct <span class="op">=</span> X <span class="op">\</span> y</span>
<span id="cb14-9"><a href="#cb14-9"></a>results <span class="op">=</span> <span class="fu">lsmr</span>(X, y, log <span class="op">=</span> <span class="cn">true</span>)</span>
<span id="cb14-10"><a href="#cb14-10"></a>beta_lsmr <span class="op">=</span> results[<span class="fl">1</span>]</span>
<span id="cb14-11"><a href="#cb14-11"></a><span class="pp">@show</span> <span class="fu">norm</span>(beta_direct <span class="op">-</span> beta_lsmr)</span>
<span id="cb14-12"><a href="#cb14-12"></a><span class="fu">println</span>(<span class="st">"</span><span class="sc">$</span>(results[<span class="kw">end</span>])<span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>norm(beta_direct - beta_lsmr) = 1.0615184241157149e-5
Converged after 15 iterations.</code></pre>
</div>
</div>
</section>
<section id="matrix-free-lls" class="slide level2">
<h2>Matrix-Free LLS</h2>
<ul>
<li>To solve LLS problems, we need <span class="math inline">\(X u\)</span> and <span class="math inline">\(X^T v\)</span> products</li>
<li>We can provide those functions directly (cheating here by just using the matrix itself)</li>
</ul>
<div class="cell columns column-output-location" data-execution_count="9">
<div class="column">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource julia number-lines code-with-copy"><code class="sourceCode julia"><span id="cb16-1"><a href="#cb16-1"></a><span class="co"># matrix-vector product</span></span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="fu">X_func</span>(u) <span class="op">=</span> X <span class="op">*</span> u</span>
<span id="cb16-3"><a href="#cb16-3"></a></span>
<span id="cb16-4"><a href="#cb16-4"></a><span class="co"># adjoint-vector product</span></span>
<span id="cb16-5"><a href="#cb16-5"></a><span class="fu">X_T_func</span>(v) <span class="op">=</span> X<span class="op">'</span> <span class="op">*</span> v</span>
<span id="cb16-6"><a href="#cb16-6"></a></span>
<span id="cb16-7"><a href="#cb16-7"></a>X_map <span class="op">=</span> <span class="fu">LinearMap</span>(X_func, X_T_func, N, M)</span>
<span id="cb16-8"><a href="#cb16-8"></a>results <span class="op">=</span> <span class="fu">lsmr</span>(X_map, y, log <span class="op">=</span> <span class="cn">true</span>)</span>
<span id="cb16-9"><a href="#cb16-9"></a><span class="fu">println</span>(<span class="st">"</span><span class="sc">$</span>(results[<span class="kw">end</span>])<span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column">
<div class="cell-output cell-output-stdout">
<pre><code>Converged after 15 iterations.</code></pre>
</div>
</div>
</div>
</section>
<section id="eigenvalue-problems" class="slide level2">
<h2>Eigenvalue Problems</h2>
<ul>
<li>Variation on CTMC example: <span class="math inline">\(a &gt;0\)</span> gain, <span class="math inline">\(b &gt; 0\)</span> to lose</li>
</ul>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource julia number-lines code-with-copy"><code class="sourceCode julia"><span id="cb18-1"><a href="#cb18-1"></a>N <span class="op">=</span> <span class="fl">4</span></span>
<span id="cb18-2"><a href="#cb18-2"></a>a <span class="op">=</span> <span class="fl">0.1</span></span>
<span id="cb18-3"><a href="#cb18-3"></a>b <span class="op">=</span> <span class="fl">0.05</span></span>
<span id="cb18-4"><a href="#cb18-4"></a>Q <span class="op">=</span> <span class="fu">Tridiagonal</span>(<span class="fu">fill</span>(b, N<span class="op">-</span><span class="fl">1</span>),</span>
<span id="cb18-5"><a href="#cb18-5"></a>                [<span class="op">-</span>a; <span class="fu">fill</span>(<span class="fu">-</span>(a <span class="op">+</span> b), N<span class="op">-</span><span class="fl">2</span>); <span class="op">-</span>b],</span>
<span id="cb18-6"><a href="#cb18-6"></a>                <span class="fu">fill</span>(a, N<span class="op">-</span><span class="fl">1</span>))</span>
<span id="cb18-7"><a href="#cb18-7"></a><span class="co"># Find smallest magnitude eigenvalue (i.e. 0)</span></span>
<span id="cb18-8"><a href="#cb18-8"></a>lambda, phi <span class="op">=</span> <span class="fu">eigs</span>( Q<span class="op">'</span>, nev <span class="op">=</span> <span class="fl">1</span>, which <span class="op">=</span> <span class="op">:</span>SM, maxiter <span class="op">=</span> <span class="fl">1000</span>)</span>
<span id="cb18-9"><a href="#cb18-9"></a>phi <span class="op">=</span> <span class="fu">real</span>(phi) <span class="op">./</span> <span class="fu">sum</span>(<span class="fu">real</span>(phi))</span>
<span id="cb18-10"><a href="#cb18-10"></a><span class="pp">@show</span> lambda</span>
<span id="cb18-11"><a href="#cb18-11"></a><span class="pp">@show</span> <span class="fu">mean</span>(phi);</span>
<span id="cb18-12"><a href="#cb18-12"></a>Q<span class="op">'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>lambda = ComplexF64[-9.270990685613062e-18 + 0.0im]
mean(phi) = 0.25</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>4×4 Tridiagonal{Float64, Vector{Float64}}:
 -0.1   0.05    ⋅      ⋅ 
  0.1  -0.15   0.05    ⋅ 
   ⋅    0.1   -0.15   0.05
   ⋅     ⋅     0.1   -0.05</code></pre>
</div>
</div>
</section>
<section id="implementing-matrix-free-operator-for-adjoint" class="slide level2">
<h2>Implementing Matrix-Free Operator for Adjoint</h2>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource julia number-lines code-with-copy"><code class="sourceCode julia"><span id="cb21-1"><a href="#cb21-1"></a><span class="kw">function</span> <span class="fu">Q_adj_product</span>(x)</span>
<span id="cb21-2"><a href="#cb21-2"></a>    Q_x <span class="op">=</span> <span class="fu">zero</span>(x)</span>
<span id="cb21-3"><a href="#cb21-3"></a>    Q_x[<span class="fl">1</span>] <span class="op">=</span> <span class="op">-</span>a <span class="op">*</span> x[<span class="fl">1</span>] <span class="op">+</span> b <span class="op">*</span> x[<span class="fl">2</span>]</span>
<span id="cb21-4"><a href="#cb21-4"></a>    <span class="cf">for</span> i <span class="op">=</span> <span class="fl">2</span><span class="op">:</span>(N<span class="op">-</span><span class="fl">1</span>)</span>
<span id="cb21-5"><a href="#cb21-5"></a>        Q_x[i] <span class="op">=</span> a <span class="op">*</span> x[i<span class="op">-</span><span class="fl">1</span>] <span class="op">-</span> (a <span class="op">+</span> b) <span class="op">*</span> x[i] <span class="op">+</span> b <span class="op">*</span> x[i<span class="op">+</span><span class="fl">1</span>]</span>
<span id="cb21-6"><a href="#cb21-6"></a>    <span class="cf">end</span></span>
<span id="cb21-7"><a href="#cb21-7"></a>    Q_x[N] <span class="op">=</span> a <span class="op">*</span> x[N<span class="op">-</span><span class="fl">1</span>] <span class="op">-</span> b <span class="op">*</span> x[N]</span>
<span id="cb21-8"><a href="#cb21-8"></a>    <span class="cf">return</span> Q_x</span>
<span id="cb21-9"><a href="#cb21-9"></a><span class="kw">end</span></span>
<span id="cb21-10"><a href="#cb21-10"></a>x_check <span class="op">=</span> <span class="fu">rand</span>(N)</span>
<span id="cb21-11"><a href="#cb21-11"></a><span class="fu">norm</span>(<span class="fu">Q_adj_product</span>(x_check) <span class="op">-</span> Q<span class="op">'</span> <span class="op">*</span> x_check)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>0.0</code></pre>
</div>
</div>
</section>
<section id="solving-with-a-wrapper-for-the-matrix-free-operator" class="slide level2">
<h2>Solving with a Wrapper for the Matrix-Free Operator</h2>
<ul>
<li>The <code>LinearMap</code> wrapper adds features required for algorithms (e.g.&nbsp;<code>size(Q_adj_map</code> and <code>Q_adj_map * v</code> overloads)</li>
</ul>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource julia number-lines code-with-copy"><code class="sourceCode julia"><span id="cb23-1"><a href="#cb23-1"></a>Q_adj_map <span class="op">=</span> <span class="fu">LinearMap</span>(Q_adj_product, N)</span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="co"># Get smallest magnitude only using the Q'(x) map</span></span>
<span id="cb23-3"><a href="#cb23-3"></a>lambda, phi <span class="op">=</span> <span class="fu">eigs</span>(Q_adj_map, nev <span class="op">=</span> <span class="fl">1</span>, which <span class="op">=</span> <span class="op">:</span>SM, maxiter <span class="op">=</span> <span class="fl">1000</span>)</span>
<span id="cb23-4"><a href="#cb23-4"></a>phi <span class="op">=</span> <span class="fu">real</span>(phi) <span class="op">./</span> <span class="fu">sum</span>(<span class="fu">real</span>(phi))</span>
<span id="cb23-5"><a href="#cb23-5"></a><span class="pp">@show</span> lambda</span>
<span id="cb23-6"><a href="#cb23-6"></a><span class="pp">@show</span> <span class="fu">mean</span>(phi);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>lambda = ComplexF64[1.6525994004046e-17 + 0.0im]
mean(phi) = 0.25</code></pre>
</div>
</div>
</section></section>
<section>
<section id="preconditioning" class="title-slide slide level1 center">
<h1>Preconditioning</h1>

</section>
<section id="changing-the-geometry" class="slide level2">
<h2>Changing the Geometry</h2>
<ul>
<li>In practice, most Krylov methods are preconditioned in practice or else direct methods usually dominate. Same with large nonlinear systems</li>
<li>As discussed, the key issue for the convergence speed of iterative methods is the geometry (e.g.&nbsp;condition number of hessian, etc)</li>
<li>Preconditioning changes the geometry. e.g.&nbsp;more like circles or with eigenvalue problems spread out the eigenvalues of interest</li>
<li>Preconditioners for a matrix <span class="math inline">\(A\)</span> requires art and tradeoffs
<ul>
<li>Want be relatively cheap to calculate, and must be invertible</li>
<li>Want to have <span class="math inline">\(\text{cond}(P A) \ll \text{cond}(A)\)</span></li>
</ul></li>
<li>Ideal preconditioner for <span class="math inline">\(A x = b\)</span> is <span class="math inline">\(P=A^{-1}\)</span> since <span class="math inline">\(A^{-1} A x = x = A^{-1} b\)</span>
<ul>
<li><span class="math inline">\(\text{cond}(A^{-1}A)=1\)</span>! But that is equivalent to solving problem</li>
</ul></li>
</ul>
</section>
<section id="right-preconditioning-a-linear-system" class="slide level2">
<h2>Right-Preconditioning a Linear System</h2>
<p><span class="math display">\[
\begin{aligned}
A x &amp;= b\\
A P^{-1} P x &amp;= b\\
A P^{-1} y &amp;= b\\
P x &amp;= y
\end{aligned}
\]</span> That is, solve <span class="math inline">\((A P^{-1})y = b\)</span> for <span class="math inline">\(y\)</span>, and then solve <span class="math inline">\(P x = y\)</span> for <span class="math inline">\(x\)</span>.</p>
</section>
<section id="raw-conjugate-gradient" class="slide level2">
<h2>Raw Conjugate Gradient</h2>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource julia number-lines code-with-copy"><code class="sourceCode julia"><span id="cb25-1"><a href="#cb25-1"></a>N <span class="op">=</span> <span class="fl">200</span></span>
<span id="cb25-2"><a href="#cb25-2"></a>A <span class="op">=</span> <span class="fu">sprand</span>(N, N, <span class="fl">0.1</span>)   <span class="co"># 10 percent non-zeros</span></span>
<span id="cb25-3"><a href="#cb25-3"></a>A <span class="op">=</span> A <span class="op">*</span> A<span class="op">'</span></span>
<span id="cb25-4"><a href="#cb25-4"></a>b <span class="op">=</span> <span class="fu">rand</span>(N)</span>
<span id="cb25-5"><a href="#cb25-5"></a><span class="pp">@show</span> <span class="fu">cond</span>(<span class="fu">Matrix</span>(A))</span>
<span id="cb25-6"><a href="#cb25-6"></a>sol <span class="op">=</span> <span class="fu">cg</span>(A, b, log <span class="op">=</span> <span class="cn">true</span>, maxiter <span class="op">=</span> <span class="fl">1000</span>)</span>
<span id="cb25-7"><a href="#cb25-7"></a>sol[<span class="kw">end</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>cond(Matrix(A)) = 972303.1119375983</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>Converged after 389 iterations.</code></pre>
</div>
</div>
</section>
<section id="diagonal-preconditioner" class="slide level2">
<h2>Diagonal Preconditioner</h2>
<ul>
<li>A simple preconditioner is the diagonal of <span class="math inline">\(A\)</span></li>
<li>This is cheap to calculate, and is invertible if the diagonal has no zeros</li>
<li>For some problems this has a huge impact on convergence/condition, for others it does nothing</li>
</ul>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource julia number-lines code-with-copy"><code class="sourceCode julia"><span id="cb28-1"><a href="#cb28-1"></a>P <span class="op">=</span> <span class="fu">DiagonalPreconditioner</span>(A)</span>
<span id="cb28-2"><a href="#cb28-2"></a>sol <span class="op">=</span> <span class="fu">cg</span>(A, b; Pl <span class="op">=</span> P, log <span class="op">=</span> <span class="cn">true</span>, maxiter <span class="op">=</span> <span class="fl">1000</span>)</span>
<span id="cb28-3"><a href="#cb28-3"></a>sol[<span class="kw">end</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>Converged after 367 iterations.</code></pre>
</div>
</div>
</section>
<section id="incomplete-lu-or-cholesky" class="slide level2">
<h2>Incomplete LU or Cholesky</h2>
<ul>
<li>Iterate part of the way on an LU or Cholesky factorization</li>
<li>Not the total inverse, but can make a big difference</li>
</ul>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource julia number-lines code-with-copy"><code class="sourceCode julia"><span id="cb30-1"><a href="#cb30-1"></a>P <span class="op">=</span> <span class="fu">ilu</span>(A, τ <span class="op">=</span> <span class="fl">0.1</span>)</span>
<span id="cb30-2"><a href="#cb30-2"></a>sol <span class="op">=</span> <span class="fu">cg</span>(A, b; Pl <span class="op">=</span> P, log <span class="op">=</span> <span class="cn">true</span>, maxiter <span class="op">=</span> <span class="fl">1000</span>)</span>
<span id="cb30-3"><a href="#cb30-3"></a>sol[<span class="kw">end</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>Converged after 151 iterations.</code></pre>
</div>
</div>
</section>
<section id="others" class="slide level2">
<h2>Others</h2>
<ul>
<li>In the above we aren’t getting huge gains, but it is also lacking structure</li>
<li>If you have problems with multiple scales, as might come out of discretizing multiple dimensions in a statepsace, see <a href="https://en.wikipedia.org/wiki/Multigrid_method">multigrid</a> methods
<ul>
<li>Algebraic Multigrid preconditioner is often useful even outside of having different scales</li>
</ul></li>
<li>Other preconditioners include ones intended for <a href="https://github.com/danspielman/Laplacians.jl">Graph Laplacians</a> such as approximate cholesky decompositions and combinatorial multigrid preconditioners.
<ul>
<li>See <a href="https://arxiv.org/abs/2303.00709">paper</a> for more</li>
</ul></li>
</ul>

<div class="footer footer-default">

</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: false,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1280,

        height: 720,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>